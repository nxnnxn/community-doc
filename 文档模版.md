| 版本   | 时间        | 修改人 | 备注  |
|------|-----------|-----|-----|
| V1.0 | 2022.9.22 | 如闻  | 初始化 |

## 1.需求背景

### 1.1.需求概述

> 相关PRD以及介绍

### 1.2.技术目标

> 任何架构总得有个技术目标,比如提升接口成功率,也可以和业务目标绑定

| 场景 | 目标 | 备注 |
|----|----|----|
|    |    |    |

### 1.3.术语

> 整体架构在概念上的定义

| 术语 | 定义 | 备注 |
|----|----|----|
|    |    |    |

## 2.需求分析

### 2.1.业务分析

> 一句话介绍5W 指 Who、When、What、Why、Where

#### 2.1.1.需求干系人

> 单独拆分需求相关人员，用于冲突

| 人员 | 项目角色 |
|----|------|
| 如闻 | 研发   |

### 2.2.用例分析

> BDD模式,用于场景故事,用例分析需要include相关文档,

### 2.3.约束和限制

> [8C 指的是 8 个约束和限制，
> 即 Constraints，包括性能 Performance、成本 Cost、时间 Time、可靠性 Reliability、安全性
> Security、合规性 Compliance、技术性 Technology、兼容性 Compatibility
> 需求中涉及的性能、成本、可靠性等仅仅是利益关联方提出的诉求，不一定准确；如果经过分析有的约束没有必要，或成本太高、难度太大，这些约束是可以调整的

### 2.4.复杂度分析

> 非功能需求分析

#### 2.4.1.高可用分析

> 面向失败的架构设计原则:<br>
> 容灾(主备切换,同城多活,异地多活)<br>
> 容错(强弱依赖,降级熔断,资源隔离)<br>
> 容量(稳态容量,尖刺容量,防护流控)<br>
> 面向精细化运维管控原则:<br>
> 可灰度(环境管理,版本控制,灰度策略)<br>
> 可观测(监控告警,日志事件,链路追踪)<br>
> 可回滚(配置开关,回滚策略,优雅上下线)<br>
> 面向风险的应急快恢原则:<br>
> 故障发现(统一告警,监控大屏,风险预测)<br>
> 故障响应(组织协调,告警关联分析,知识图谱)<br>
> 故障恢复(预案执行,故障自愈,故障复盘)<br>

#### 2.4.2.高性能分析

> 有效的云资源选型,主要是容量规划

#### 2.4.3.可扩展分析

>

#### 2.4.4.安全分析

>

## 3.方案选型

> 列出3-5个备选方案供大家参考,备选方案的差异要比较明显,备选方案的技术不要只局限于已经熟悉的技术

## 4.方案评估

> 列出我们需要关注的质量属性点，然后分别从这些质量属性的维度去评估每个方案，再综合挑选适合当时情况的最优方案。常见的方案质量属性点有：性能、可用性、硬件成本、项目投入、复杂度、安全性、可扩展性等。在评估这些质量属性时，需要遵循架构设计原则
> 1“合适原则”和原则 2“简单原则”，避免贪大求全，基本上某个质量属性能够满足一定时期内业务发展就可以了。

## 5.详细设计

> 可参考[C4_Model](https://c4model.com/)

### 5.1.系统架构

> 架构关注领域模型和该系统和其他系统的边界,一般情况领域模型不变的情况下，基本不变,只描述新添加的能力
> 使用C4-plantuml绘画

![System Context diagram for Internet Banking System](https://www.plantuml.com/plantuml/png/VL7BRXf14BplLtIu14iyBZdbP9kWn18uA82Yd5QzGmCZve6cUmFyVNgNPGF1yMscfwgwgkQH1PEKtcKVR32kN15iHVRyUJXCU1Xih6pBecHA9WQX80CJ_N3lC5ISFilAsM8u-jIVLQFbT3Bqo499H_ceOXnbiA_KFq8PbEfL0cHBi8xEnOCD6t0s461OmSspJQod2BeQN3Jet4arMe__ocUJfr_VbulyvylYMpuPVns_Vka-P9bOSGJp4mjvQ0YmihX9wDL2WXSTfK02pnXswgR1PjcC4iVGDILBz9Hwq3bFqBNGKVFMqSSdk20Xhki4XQ9wSD3-ODymwncWCR4CmeFEGtRUrYtEYZdNLvNxZwrwKzKRj-kuAkctfGFOe84yYeq1i8XbNQHDjqjxTTCUTmHxF7bgV3H6yl5HkXwj--jatA_kmEt-XMQpjJrqCBKcHOvhWV7HR35i2EYQq6PifSDQgoVLcLxERsISIqp4WCvTsZGwWAQcDvAsRVIkaah2m6WgcDv8J9tq1xchNxrhVid42bDK_encTmMzxMLEOSLDM0Q93UULx6PRn7JtfU-mwyJJnUmiSSziIslTFIgzzEuF "System Context diagram for Internet Banking System")

### 5.2.应用架构

> 以实际创建的应用为主的架构,重点是可单独运行的进程主要展示哪些逻辑放在哪个应用里,
> 包含了服务端应用,客户端应用,数据库,文件系统,各种中间件等

![Container diagram for Internet Banking System](https://www.plantuml.com/plantuml/png/fLN1RkCs4BtxAwRfeLv0Zb6WfvxMiOrkjdRYhfncUn96rDWcbY85ScIlKVJVErGKoN8MM1IzaKypRnxV3AdtWT5pNPhH3zegKnS41-Og_3gTUZpTxZKVwhmEv9MpJ9PlbIkdbK4RSoQ12wFpwVoNoIP2J-lLjCJ0v0NAvfA1sfA_hIB_Jr1RIIw51FX0i7F6k9EsUp0I16WB67pMFiZAWHG7unGQSnQEJkNR0l9rDVlhyMcRRHytsUBn-M7yhiTcQPR-ljpEFmZOGi_tsm_PQldRyc4Xu8Wr6uAE50gDUu-b2FLmRvcy9OOxj5-YvlGScChHQ4C-E3jMTM1NaazWtgrkPl0AWzirXyebEu6Jc0fLauYcmG2LShNbS2CwNgYpEm4AzEUn-bcuhWNSl8E_Hm3GwnsVAC-mgYJucNAOLPNH2baxUoFGHpnY0cdbe_Zrd_E8BSZeeyXef0MMM0LjcsCx6hYhcxyUV3CJaSFAeKAXI-MpeSa6znIhlrPDbTSL9p2p-zgWZ_36kwCkA00Qy-qgEvcLA1sDvZEmwvmCSDGOSxG7EJ3atfq2-JUIIfThGwqVwxZfHCr_JE0pbYXM3CM0qQLcAY3KUI2MflqFSIy2eA2ZLdGjRv6F2sJCCL3iGxkCQj8_LZ3Oi_EYBTv0yBJNWNtJKz1Mvh9irWaSC1n4DzPy0EMf8CiQJKZYN548ODnUDiJgzerHEQelP0jnIiUHtTn_Ut8MJi9ydpTmxZiEHLE4M4h_qqttyYkFgKHjij00GhUSh6NVtgp8lnNpTKED1jPQUHVSZc7vLHtGxWbUCeNsWhDLqBCAfzrvBEdgwlRcDbFOzbe9q9tYmcB0tDNSDphfRcm2xD46RCxRcppwHERYLUZlvbEW46j_s6utgGGEuqA5turfHxkdQyjb3wJtXzprBq53rz_pbga11stl2c8uMvN0n_JnONfPl2_v7pEpEudkXVL3FsJvH5W4s7bNDW_FoMkc0EmYSqkyk9iBPSTvuSVL6AL26u0c4MquUY5N4pVKCCohWqn0NpvTRpT2D71va3wSkzwO9d_QklDvlUhCUI-fyQ_rBm00)

### 5.3.核心流程

> 站在使用者的角度你对外提供的服务的核心流程

### 5.4.存储设计

> 系统中数据库表如何设计,缓存如何设计,有哪些消息结构

#### 5.4.1.数据库设计

> ER图

#### 5.4.2.缓存设计

> 缓存使用的数据结构和本身的设计

#### 5.4.3.消息设计

> 消息的定义,结构是什么

### 5.5.组件设计

> 总结相关话语,重点突出哪些组件保证了全局系统的高可用,哪些组件要保证高性能,哪些组件要保证高性能

1. 总结
2. 高可用
3. 高性能
4. 可扩展
5. 安全

#### 5.5.1.A组件

> 在组件上同样要说明这几个特性在设计上是如何保证的

![Component diagram for Internet Banking System - API Application](https://www.plantuml.com/plantuml/png/fPHDR-Cs48Rl-XNJ75e7IE9BJpsjuwJTB9AD4JlzE1aZSYonvOT0KdQDel-zGyesRISe0kn953cSUUQTL_eK8lhO6rrzfwpGlIHeO-p2J-EnnyrDesBRrtqWBvoDPEEDS6RSQRJfpdM8KgjwFFtnUfQsNfyUnmP39CzRowapdRFfJfVo_m2zvSk6Do2s12kdjTiesu1MbW2jX9DZvGEl771nq4wWrblESQ1yMw1wdFpn_BfO_lQm-BnylF_b_klTwBAgeegQu10BKc7ZqN1z3m-MMIr5k4NxLqAPRvdUm3LCPWymwJgj14RbR5LDkNzaK3yA7Lx1nPp3EUyC6peElE2ZFt6DGNZLnTmLsgRNwDF9pBkraXG0jSvTgZr0lGDOiKWf3seLjwbzqOVe3Fa0QuNfZlAmeHfgxpQ1_Ct5vH6QIMHFhbOwGwMIlwD1h-nfTT3Ag4WIGby7hkxYDz2ON6__aBHMWawmxkgHhBd-7KQiCL1YUI6DGsRORyDSj6GmdSwZyyoPV0UU6XMYpz5Co6CpUNq5BOQM963F73Rk1W32aqolgCCLe10K0cZNy0j5aRY66I_l_uuZKuSa679QZuRER518yhpSAeiaUECWq14FOEtwM1JAnLrl8wyOtmRCKXQE8j3obkCa-kq8EyL5pyntSGd_L01GJ3mAgh69ZXziOaYPlDEQiikUVft22uLujZr9tziWQaYpJ3b0MLw-F_mmY71vLlhG5MVSBM7U6yFu7-8eDYncsgZO0aBOfHcKLZwZ76HyGn98z9wDcOJOBSjf7bxdKoEtX2V-FxErJrOacINXy66iLo1Q75uw367Zl2oJEyLW4wrGeAJ_iHByd2FUWPh0S1cStGt2x7ESJI9LpgLVIEyCSAJ0Qo1Mw71UfbJmtWILwxBEtoHA-1usl4KGNQBxSdSxBHUEM-NbFc7wo_2V__DYCPjpyBzLbMBpRp9Zbh0ly-Ul-xWIL5ZV3yoHvWFPp0UIVI8hUwF_0m00 "Component diagram for Internet Banking System - API Application")

1. 高可用
2. 高性能
3. 可扩展
4. 安全

##### 5.5.1.1 A时序

> 组件下的主要时序图

### 5.6.部署架构

## 6.横向概念

### 6.1.接口定义

> 需要和Swagger一起定义,通过代码生成相关文档,最后能和相关APIDOC联合,可快速MOCK数据

#### 6.1.1.A接口

### 6.2.中间件配置

#### 5.2.1.动态配置

#### 5.2.2.消息配置

### 6.3.数据及埋点

#### 5.3.1.技术埋点

#### 5.3.2.业务埋点

#### 5.3.2.GOC预警

## 7.排期规划







